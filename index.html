<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Juego con Manos</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@7.3.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <!-- Botón para iniciar la música y la experiencia VR -->
    <button id="startButton" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; padding: 10px 20px;">Iniciar Experiencia VR</button>

    <a-scene embedded vr-mode-ui="enabled: true" physics="gravity: -9.8; debug: true;">
        <!-- Piso mucho más grande con imagen de césped -->
        <a-plane position="0 0 -5" rotation="-90 0 0" width="100" height="100" src="https://th.bing.com/th/id/R.d489928b686980ff4388b9c3f99e07de?rik=igXbsbn5X0K%2bzw&riu=http%3a%2f%2fst2.depositphotos.com%2f2869437%2f5786%2fi%2f950%2fdepositphotos_57861777-stock-photo-green-grass-surface.jpg&ehk=AyDo5JhtyKhW3IBSv0aj3am61sclxkKM9%2fY9eLg1fyU%3d&risl=&pid=ImgRaw&r=0"></a-plane>

        <!-- Cielo celeste -->
        <a-sky color="#87CEEB"></a-sky>

        <!-- Mesa -->
        <a-box position="0 0.5 -3" width="2" height="0.1" depth="1" color="#8B4513" dynamic-body="mass: 20; friction: 0.5; restitution: 0.5;"></a-box>

        <!-- Objeto encima de la mesa (esfera pequeña) -->
        <a-sphere id="objeto" position="0 1 -3" radius="0.2" color="#FF0000" dynamic-body="mass: 1; friction: 0.5; restitution: 0.5;"></a-sphere>

        <!-- Más objetos -->
        <!-- Caja pequeña -->
        <a-box id="caja" position="2 0.5 -3" width="0.5" height="0.5" depth="0.5" color="#0000FF" dynamic-body="mass: 2; friction: 0.5; restitution: 0.5;"></a-box>

        <!-- Esfera pequeña -->
        <a-sphere id="esfera" position="-2 1 -3" radius="0.3" color="#FFFF00" dynamic-body="mass: 1; friction: 0.5; restitution: 0.5;"></a-sphere>

        <!-- Cámara VR -->
        <a-camera position="0 1.6 0" vr-mode-ui="enabled: true">
            <!-- Manos de los controladores -->
            <a-entity oculus-touch-controls="hand: left" raycaster="objects: .clickable" line="color: red;"></a-entity>
            <a-entity oculus-touch-controls="hand: right" raycaster="objects: .clickable" line="color: blue;"></a-entity>
        </a-camera>

        <!-- Añadir interacciones -->
        <a-entity id="manos" position="0 1.5 0">
            <a-box id="mano-izquierda" position="-0.5 0 0" width="0.3" height="0.3" depth="0.3" color="#00ff00" class="clickable"></a-box>
            <a-box id="mano-derecha" position="0.5 0 0" width="0.3" height="0.3" depth="0.3" color="#ff0000" class="clickable"></a-box>
        </a-entity>
    </a-scene>

    <script>
        // Botón de inicio
        const startButton = document.getElementById('startButton');
        const music = new Audio('https://www.youtube.com/watch?v=PSx_uvuCWRI'); // Música de fondo

        // Función para iniciar la música y pantalla completa
        startButton.addEventListener('click', function() {
            // Reproducir la música
            music.play();
            
            // Iniciar la escena VR y cambiar a pantalla completa
            const scene = document.querySelector('a-scene');
            scene.enterVR();
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) { // Firefox
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) { // Chrome, Safari
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { // IE/Edge
                document.documentElement.msRequestFullscreen();
            }

            // Ocultar el botón una vez que se inicie la experiencia
            startButton.style.display = 'none';
        });

        // Agregar evento de agarrar y lanzar
        let objeto = document.getElementById('objeto');
        let manoIzquierda = document.getElementById('mano-izquierda');
        let manoDerecha = document.getElementById('mano-derecha');

        let isGrabbing = false;

        // Función de agarrar y lanzar
        function grabObject(event) {
            if (!isGrabbing) {
                isGrabbing = true;
                objeto.setAttribute('position', {x: event.detail.intersection.point.x, y: event.detail.intersection.point.y, z: event.detail.intersection.point.z});
                objeto.setAttribute('dynamic-body', 'mass: 0.1; friction: 0.5; restitution: 0.5');
            } else {
                isGrabbing = false;
                objeto.setAttribute('dynamic-body', 'mass: 1; friction: 0.5; restitution: 0.5');
                let force = {x: 0, y: 10, z: 0}; // Lanzar el objeto
                objeto.body.applyImpulse(force);
            }
        }

        // Detectar el click de los controladores
        manoIzquierda.addEventListener('click', grabObject);
        manoDerecha.addEventListener('click', grabObject);
    </script>
</body>
</html>
